<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get the patient level prediction data from the server — getPlpData • PatientLevelPrediction</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get the patient level prediction data from the server — getPlpData" />

<meta property="og:description" content="This function executes a large set of SQL statements against the database in OMOP CDM format to
extract the data needed to perform the analysis." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PatientLevelPrediction</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/PatientLevelPrediction.html">Get started</a>
</li>
<li>
  <a href="../articles/Videos.html">Videos</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/AddingCustomAlgorithms.html">Adding Custom Patient-Level Prediction Algorithms</a>
    </li>
    <li>
      <a href="../articles/BuildingDeepLearningModels.html">Building Deep Learning Models</a>
    </li>
    <li>
      <a href="../articles/BuildingEnsembleModels.html">Building Ensemble Models</a>
    </li>
    <li>
      <a href="../articles/BuildingMultiplePredictiveModels.html">Automatically Build Multiple Patient-Level Predictive Models</a>
    </li>
    <li>
      <a href="../articles/BuildingPredictiveModels.html">Building patient-level predictive models</a>
    </li>
    <li>
      <a href="../articles/CreatingNetworkStudies.html">Making  patient-level predictive network study packages</a>
    </li>
    <li>
      <a href="../articles/GeneratingLearningCurves.html">Generating Learning Curves</a>
    </li>
    <li>
      <a href="../articles/ImplementingExistingModels.html">Implementing Existing Prediction Models using the OHDSI PatientLevelPrediction Framework</a>
    </li>
    <li>
      <a href="../articles/InstallationGuide.html">Patient-Level Prediction Installation Guide</a>
    </li>
    <li>
      <a href="../articles/Videos.html">Demo Videos</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://www.ohdsi.org/past-events/patient-level-prediction/">Tutorial</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/PatientLevelPrediction">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get the patient level prediction data from the server</h1>
    <small class="dont-index">Source: <a href='https://github.com/OHDSI/PatientLevelPrediction/blob/master/R/SaveLoadPlp.R'><code>R/SaveLoadPlp.R</code></a></small>
    <div class="hidden name"><code>getPlpData.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function executes a large set of SQL statements against the database in OMOP CDM format to
extract the data needed to perform the analysis.</p>
    
    </div>

    <pre class="usage"><span class='fu'>getPlpData</span>(<span class='no'>connectionDetails</span>, <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>oracleTempSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>, <span class='no'>cohortId</span>, <span class='no'>outcomeIds</span>,
  <span class='kw'>studyStartDate</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>studyEndDate</span> <span class='kw'>=</span> <span class='st'>""</span>,
  <span class='kw'>cohortDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>, <span class='kw'>cohortTable</span> <span class='kw'>=</span> <span class='st'>"cohort"</span>,
  <span class='kw'>outcomeDatabaseSchema</span> <span class='kw'>=</span> <span class='no'>cdmDatabaseSchema</span>, <span class='kw'>outcomeTable</span> <span class='kw'>=</span> <span class='st'>"cohort"</span>,
  <span class='kw'>cdmVersion</span> <span class='kw'>=</span> <span class='st'>"5"</span>, <span class='kw'>firstExposureOnly</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>washoutPeriod</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>sampleSize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>covariateSettings</span>, <span class='kw'>excludeDrugsFromCovariates</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>baseUrl</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>connectionDetails</th>
      <td><p>An R object of type<br /><code>connectionDetails</code> created using the
function <code>createConnectionDetails</code> in the
<code>DatabaseConnector</code> package.</p></td>
    </tr>
    <tr>
      <th>cdmDatabaseSchema</th>
      <td><p>The name of the database schema that contains the OMOP CDM
instance.  Requires read permissions to this database. On SQL
Server, this should specifiy both the database and the schema,
so for example 'cdm_instance.dbo'.</p></td>
    </tr>
    <tr>
      <th>oracleTempSchema</th>
      <td><p>For Oracle only: the name of the database schema where you want
all temporary tables to be managed. Requires create/insert
permissions to this database.</p></td>
    </tr>
    <tr>
      <th>cohortId</th>
      <td><p>A unique identifier to define the at risk cohort.  If
cohortTable = DRUG_ERA, cohortId is a CONCEPT_ID and all
descendant concepts within that CONCEPT_ID will be used to
define the cohort.  If cohortTable &lt;&gt; DRUG_ERA, cohortId is
used to select the cohort_concept_id in the cohort-like table.</p></td>
    </tr>
    <tr>
      <th>outcomeIds</th>
      <td><p>A list of cohort_definition_ids used to define outcomes (-999 mean no outcome gets downloaded).</p></td>
    </tr>
    <tr>
      <th>studyStartDate</th>
      <td><p>A calendar date specifying the minimum date that a cohort index
date can appear. Date format is 'yyyymmdd'.</p></td>
    </tr>
    <tr>
      <th>studyEndDate</th>
      <td><p>A calendar date specifying the maximum date that a cohort index
date can appear. Date format is 'yyyymmdd'. Important: the study
end data is also used to truncate risk windows, meaning no outcomes
beyond the study end date will be considered.</p></td>
    </tr>
    <tr>
      <th>cohortDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where the
cohort data used to define the at risk cohort is available.
If cohortTable = DRUG_ERA, cohortDatabaseSchema is not used
by assumed to be cdmSchema.  Requires read permissions to this
database.</p></td>
    </tr>
    <tr>
      <th>cohortTable</th>
      <td><p>The tablename that contains the at risk cohort.  If
cohortTable &lt;&gt; DRUG_ERA, then expectation is cohortTable has
format of COHORT table: cohort_concept_id, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.</p></td>
    </tr>
    <tr>
      <th>outcomeDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where
the data used to define the outcome cohorts is available. If
cohortTable = CONDITION_ERA, exposureDatabaseSchema is not
used by assumed to be cdmSchema.  Requires read permissions
to this database.</p></td>
    </tr>
    <tr>
      <th>outcomeTable</th>
      <td><p>The tablename that contains the outcome cohorts.  If
outcomeTable &lt;&gt; CONDITION_OCCURRENCE, then expectation is
outcomeTable has format of COHORT table:
COHORT_DEFINITION_ID, SUBJECT_ID, COHORT_START_DATE,
COHORT_END_DATE.</p></td>
    </tr>
    <tr>
      <th>cdmVersion</th>
      <td><p>Define the OMOP CDM version used: currently support "4" and "5".</p></td>
    </tr>
    <tr>
      <th>firstExposureOnly</th>
      <td><p>Should only the first exposure per subject be included? Note that
this is typically done in the <code>createStudyPopulation</code> function,
but can already be done here for efficiency reasons.</p></td>
    </tr>
    <tr>
      <th>washoutPeriod</th>
      <td><p>The mininum required continuous observation time prior to index
date for a person to be included in the at risk cohort. Note that
this is typically done in the <code>createStudyPopulation</code> function,
but can already be done here for efficiency reasons.</p></td>
    </tr>
    <tr>
      <th>sampleSize</th>
      <td><p>If not NULL, only this number of people will be sampled from the target population (Default NULL)</p></td>
    </tr>
    <tr>
      <th>covariateSettings</th>
      <td><p>An object of type <code>covariateSettings</code> as created using the
<code>createCovariateSettings</code> function in the
<code>FeatureExtraction</code> package.</p></td>
    </tr>
    <tr>
      <th>excludeDrugsFromCovariates</th>
      <td><p>A redundant option</p></td>
    </tr>
    <tr>
      <th>baseUrl</th>
      <td><p>If extracting cohorts from atlas enter atlas url to extract cohort creation details</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns an object of type <code>plpData</code>, containing information on the cohorts, their
outcomes, and baseline covariates. Information about multiple outcomes can be captured at once for
efficiency reasons. This object is a list with the following components:</p><dl class='dl-horizontal'>
<dt>outcomes</dt><dd><p>A data frame listing the outcomes per person, including the time to event, and
the outcome id. Outcomes are not yet filtered based on risk window, since this is done at
a later stage.</p></dd> <dt>cohorts</dt><dd><p>A data frame listing the persons in each cohort, listing their
exposure status as well as the time to the end of the observation period and time to the end of the
cohort (usually the end of the exposure era).</p></dd> <dt>covariates</dt><dd><p>An ffdf object listing the
baseline covariates per person in the two cohorts. This is done using a sparse representation:
covariates with a value of 0 are omitted to save space.</p></dd> <dt>covariateRef</dt><dd><p>An ffdf object describing the covariates that have been extracted.</p></dd>
<dt>metaData</dt><dd><p>A list of objects with information on how the cohortMethodData object was
constructed.</p></dd> </dl><p>The generic <code>()</code> and <code><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary()</a></code> functions have been implemented for this object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Based on the arguments, the at risk cohort data is retrieved, as well as outcomes
occurring in these subjects. The at risk cohort is identified  through
user-defined cohorts in a cohort table either inside the CDM instance or in a separate schema.
Similarly, outcomes are identified 
through user-defined cohorts in a cohort table either inside the CDM instance or in a separate
schema. Covariates are automatically extracted from the appropriate tables within the CDM.
If you wish to exclude concepts from covariates you will need to
manually add the concept_ids and descendants to the <code>excludedCovariateConceptIds</code> of the
<code>covariateSettings</code> argument.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jenna Reps, Martijn Schuemie, Marc Suchard, Patrick Ryan, Peter Rijnbeek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

