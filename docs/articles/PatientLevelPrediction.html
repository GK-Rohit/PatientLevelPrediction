<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • PatientLevelPrediction</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PatientLevelPrediction</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/PatientLevelPrediction.html">Get started</a>
</li>
<li>
  <a href="../articles/Videos.html">Videos</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AddingCustomAlgorithms.html">Adding Custom Patient-Level Prediction Algorithms</a>
    </li>
    <li>
      <a href="../articles/BuildingDeepLearningModels.html">Building Deep Learning Models</a>
    </li>
    <li>
      <a href="../articles/BuildingEnsembleModels.html">Building Ensemble Models</a>
    </li>
    <li>
      <a href="../articles/BuildingMultiplePredictiveModels.html">Automatically Build Multiple Patient-Level Predictive Models</a>
    </li>
    <li>
      <a href="../articles/BuildingPredictiveModels.html">Building patient-level predictive models</a>
    </li>
    <li>
      <a href="../articles/CreatingNetworkStudies.html">Making  patient-level predictive network study packages</a>
    </li>
    <li>
      <a href="../articles/GeneratingLearningCurves.html">Generating Learning Curves</a>
    </li>
    <li>
      <a href="../articles/ImplementingExistingModels.html">Implementing Existing Prediction Models using the OHDSI PatientLevelPrediction Framework</a>
    </li>
    <li>
      <a href="../articles/InstallationGuide.html">Patient-Level Prediction Installation Guide</a>
    </li>
    <li>
      <a href="../articles/Videos.html">Demo Videos</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://www.ohdsi.org/past-events/patient-level-prediction/">Tutorial</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/OHDSI/PatientLevelPrediction">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/PatientLevelPrediction/blob/master/vignettes/PatientLevelPrediction.rmd"><code>vignettes/PatientLevelPrediction.rmd</code></a></small>
      <div class="hidden name"><code>PatientLevelPrediction.rmd</code></div>

    </div>

    
    
<div id="quick-install-guide" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-install-guide" class="anchor"></a>Quick Install Guide</h1>
<hr>
<div id="intalling-the-r-package" class="section level2">
<h2 class="hasAnchor">
<a href="#intalling-the-r-package" class="anchor"></a>Intalling the R package</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"devtools"</span>)
<span class="kw">install_github</span>(<span class="st">"ohdsi/SqlRender"</span>) 
<span class="kw">install_github</span>(<span class="st">"ohdsi/DatabaseConnectorJars"</span>) 
<span class="kw">install_github</span>(<span class="st">"ohdsi/DatabaseConnector"</span>) 
<span class="kw">install_github</span>(<span class="st">"ohdsi/FeatureExtraction"</span>)
<span class="kw">install_github</span>(<span class="st">"ohdsi/PatientLevelPrediction"</span>) </code></pre></div>
</div>
<div id="setting-up-python" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-python" class="anchor"></a>Setting up Python</h2>
<p>Many of the classifiers in PatientLevelPrediction use python. To use the python classifiers you need to install and set up the python connection in R. We used the reticulate package to run the python code.</p>
<p>To set python up:</p>
<ul>
<li>Close your RStudio</li>
<li>Install python 3.7 using anaconda (<a href="https://www.anaconda.com/download" class="uri">https://www.anaconda.com/download</a>) [make sure you pick the correct operating system] and note the installation location. Anaconda should update you path variable with the python binary.</li>
<li>Open a new Rstudio and check whether your python is configured correctly by running:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system">system</a></span>(<span class="st">"python --version"</span>) </code></pre></div>
<p>If set up correctly you should see “Python 3.x.x :: Anaconda, Inc.” returned.</p>
<ul>
<li>If not set up correctly then:
<ul>
<li>Windows users: make sure your anaconda python binary is in the System PATH environmental variable: go to my computer -&gt; system properties -&gt; advanced system settings Then at the bottom right you’ll see a button: Environmental Variables, clicking on that will enable you to edit the PATH variable. Add the following Anaconda locations to your path: <code>D:\Anaconda3;D:\Anaconda3\Scripts;D:\Anaconda3\Library\bin</code> (this assumes your installation was done to <code>D:\Anaconda3</code>).</li>
<li>Mac/Linux users: edit the bash profile to add python in the Path by running in the terminal: touch ~/.bash_profile; open ~/.bash_profile; and adding in the location of python in the PATH variable. Unfortunately, you also need to make an edit to the .Rprofile for R to get the correct PATH. To do this open the .Rprofile by running:</li>
</ul>
</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  usethis<span class="op">::</span><span class="kw"><a href="https://usethis.r-lib.org/reference/edit.html">edit_r_profile</a></span>()</code></pre></div>
<p>and in this file add</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="dt">PATH =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">"your python bin location"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"PATH"</span>), <span class="dt">sep=</span><span class="st">":"</span>))</code></pre></div>
<ul>
<li>After editing your Path or .Rprofile open a new Rstudio session and test that python is correctly set up via</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system">system</a></span>(<span class="st">"python --version"</span>)</code></pre></div>
</div>
<div id="testing-the-patientlevelprediction-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#testing-the-patientlevelprediction-installation" class="anchor"></a>Testing the PatientLevelPrediction Installation</h2>
<p>To test whether the package is installed correctly run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(PatientLevelPrediction)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(DatabaseConnector)
connectionDetails &lt;-<span class="st"> </span><span class="kw">createConnectionDetails</span>(<span class="dt">dbms =</span> <span class="st">'sql_server'</span>, 
                                             <span class="dt">user =</span> <span class="st">'username'</span>, 
                                             <span class="dt">password =</span> <span class="st">'hidden'</span>, 
                                             <span class="dt">server =</span> <span class="st">'your server'</span>, 
                                             <span class="dt">port =</span> <span class="st">'your port'</span>)
PatientLevelPrediction<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/PatientLevelPrediction/topics/checkPlpInstallation">checkPlpInstallation</a></span>(<span class="dt">connectionDetails =</span> connectionDetails, 
                                             <span class="dt">python =</span> T)</code></pre></div>
<p>To test the installation (excluding python) run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(PatientLevelPrediction)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(DatabaseConnector)
connectionDetails &lt;-<span class="st"> </span><span class="kw">createConnectionDetails</span>(<span class="dt">dbms =</span> <span class="st">'sql_server'</span>, 
                                           <span class="dt">user =</span> <span class="st">'username'</span>, 
                                           <span class="dt">password =</span> <span class="st">'hidden'</span>, 
                                           <span class="dt">server =</span> <span class="st">'your server'</span>, 
                                           <span class="dt">port =</span> <span class="st">'your port'</span>)
PatientLevelPrediction<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/PatientLevelPrediction/topics/checkPlpInstallation">checkPlpInstallation</a></span>(<span class="dt">connectionDetails =</span> connectionDetails, 
                                             <span class="dt">python =</span> F)</code></pre></div>
<p>The check can take a while to run since it will build the following models in sequence on simulated data: Logistic Regression, RandomForest, MLP, AdaBoost, Decision Tree, Naive Bayes, KNN, Gradient Boosting. Moreover, it will test the database connection.</p>
</div>
<div id="installing-keras-optional" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-keras-optional" class="anchor"></a>Installing Keras (optional)</h2>
<p>To set up Keras</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"rstudio/keras"</span>)
<span class="co"># </span><span class="al">NOTE</span><span class="co">: A restart of your R Session is likely required</span>
<span class="co"># after installing the rstudio/keras package</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(keras)
<span class="kw">install_keras</span>()</code></pre></div>
</div>
<div id="creating-a-plp-python-vitual-environment-optional" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-plp-python-vitual-environment-optional" class="anchor"></a>Creating A PLP Python Vitual Environment (optional)</h2>
<p>The PatientLevelPrediction package contains code that will create a virual conda environment for PLP and install all the libraries required by the package. To create an virtual environment called ‘PLP’ run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PatientLevelPrediction<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/PatientLevelPrediction/topics/configurePython">configurePython</a></span>(<span class="dt">envname =</span> <span class="st">'PLP'</span>, <span class="dt">envtype =</span> <span class="st">'conda'</span>) </code></pre></div>
<p>You can then find the location of this environment by running:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reticulate<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/reticulate/topics/conda-tools">conda_list</a></span>() </code></pre></div>
<p>and the location is returned in the ‘python’ column corresponding to the ‘name’ column equal to ‘PLP’.</p>
<div id="windows-users" class="section level3">
<h3 class="hasAnchor">
<a href="#windows-users" class="anchor"></a>Windows users:</h3>
<p>simply run</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">PatientLevelPrediction<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/PatientLevelPrediction/topics/setPythonEnvironment">setPythonEnvironment</a></span>(<span class="dt">envname =</span> <span class="st">'PLP'</span>, <span class="dt">envtype =</span> <span class="st">'conda'</span>) </code></pre></div>
<p>to use the PLP environment</p>
</div>
<div id="maclinux-users" class="section level3">
<h3 class="hasAnchor">
<a href="#maclinux-users" class="anchor"></a>Mac/linux users:</h3>
<p>to make sure R uses this environment you need to edit your .Rprofile with the location of the python binary for the PLP environment. Edit the .Rprofile by running:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">usethis<span class="op">::</span><span class="kw"><a href="https://usethis.r-lib.org/reference/edit.html">edit_r_profile</a></span>()</code></pre></div>
<p>and add</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="dt">PATH =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">"your python bin location"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv</a></span>(<span class="st">"PATH"</span>), <span class="dt">sep=</span><span class="st">":"</span>))</code></pre></div>
<p>to the file then save. Where your python bin location is the location returned by</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reticulate<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/reticulate/topics/conda-tools">conda_list</a></span>() </code></pre></div>
<p>e.g., My PLP virtual environment location was /anaconda3/envs/PLP/bin/python so I added:<br>
Sys.setenv(PATH = paste(“/anaconda3/envs/PLP/bin”, Sys.getenv(“PATH”), sep=“:”))</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#quick-install-guide">Quick Install Guide</a><ul class="nav nav-pills nav-stacked">
<li><a href="#intalling-the-r-package">Intalling the R package</a></li>
      <li><a href="#setting-up-python">Setting up Python</a></li>
      <li><a href="#testing-the-patientlevelprediction-installation">Testing the PatientLevelPrediction Installation</a></li>
      <li><a href="#installing-keras-optional">Installing Keras (optional)</a></li>
      <li><a href="#creating-a-plp-python-vitual-environment-optional">Creating A PLP Python Vitual Environment (optional)</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jenna Reps, Martijn Schuemie, Marc Suchard, Patrick Ryan, Peter Rijnbeek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
